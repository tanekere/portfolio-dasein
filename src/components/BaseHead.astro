---
// Import the global.css file here so that it is included on
// all pages through the use of the <BaseHead /> component.
import '../styles/global.css';
import type { ImageMetadata } from 'astro';
import FallbackImage from '../assets/blog-placeholder-about.png';
import { getSite } from '../utils/consts';
import { SEO } from 'astro-seo';

const site = await getSite();

interface Props {
	title: string;
	description: string;
	image?: ImageMetadata;
}

const { title, description, image = FallbackImage } = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const imageURL = new URL((image as ImageMetadata).src, Astro.site ?? Astro.url);
---

<SEO
	charset="utf-8"
	title={title}
	description={description}
	canonical={canonicalURL.toString()}
	openGraph={{
		basic: {
			title,
			type: 'website',
			image: imageURL.toString(),
			url: canonicalURL.toString(),
		},
		optional: {
			description,
			siteName: site.author.name || 'Dasein',
		},
	}}
	twitter={{
		card: 'summary_large_image',
		title,
		description,
		image: imageURL.toString(),
		imageAlt: title,
	}}
		extend={{
		link: [
			{ rel: 'icon', type: 'image/svg+xml', href: import.meta.env.BASE_URL + 'favicon.svg' },
			{ rel: 'sitemap', href: import.meta.env.BASE_URL + 'sitemap-index.xml' },
			{ rel: 'alternate', type: 'application/rss+xml', title: site.title, href: new URL('rss.xml', Astro.site).toString() },
		],
		meta: [
			{ name: 'viewport', content: 'width=device-width,initial-scale=1' },
			{ name: 'generator', content: Astro.generator },
		],
	}}
/>
